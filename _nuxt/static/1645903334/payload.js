__NUXT_JSONP__("/", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,do0,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu){return {data:[{articles:[{slug:"2022-02-04-optimizing-list-in-react-solving-performance-problems-and-anti-patterns",description:bK,layout:bL,title:"Optimizing Lists in React - Solving Performance Problems and Anti-patterns",author:bM,date:"2022-02-04T00:00:00.000Z",categories:"react list performance optimizations patterns anti-patterns",social_title:"Optimizing Lists in React",social_subtitle:"Solving Performance Problems and Anti-patterns",toc:[{id:co,depth:ae,text:cp},{id:cq,depth:ae,text:cr},{id:cs,depth:ae,text:ct},{id:cu,depth:ae,text:cv}],body:{type:bb,children:[{type:b,tag:l,props:{},children:[{type:a,value:bK}]},{type:a,value:g},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"It’s easy to write inefficient code in React, with useless re-renders being the common enemy. Usually, you start from a simple application and gradually build features on top of it. At first, the application is small enough to make the inefficiencies unnoticeable, but as the complexity grows, so does the component hierarchy, and thus, the number of re-renders. Then, once the application speed becomes unbearable (according to your standards), you start profiling and optimizing the problematic areas."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In this article, we are going to discuss the optimization process for lists, which are notorious sources of performance problems in React. Most of these techniques apply to both React and React Native applications."}]},{type:a,value:g},{type:b,tag:aG,props:{id:"starting-from-a-problematic-example"},children:[{type:b,tag:u,props:{href:"#starting-from-a-problematic-example",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:"Starting from a problematic example"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"We’ll start from a problematic example and gradually discuss the process of identifying and solving the different issues."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:ar,props:{alt:"Problematic List example",src:"\u002Fposts\u002Freact-list\u002Freact_list_example.gif"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"The proposed example is a simple list of selectable items, with a few performance problems. Clicking on an item toggles the selection status, but the operation is visibly laggy. Our goal is to make the selection feel snappy. You can find the complete code as follows (a "},{type:b,tag:u,props:{href:"https:\u002F\u002Fcodesandbox.io\u002Fs\u002Fcommonreactlistmistakes-9f3ex",rel:[F,G,H],target:I},children:[{type:a,value:"Codesandbox"}]},{type:a,value:" is also available)."}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,aw]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,p,bc]},children:[{type:a,value:cw}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,cx]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:" useState "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p,bc]},children:[{type:a,value:cy}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:cz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Create mock data with elements containing increasing items"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:" data "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bs}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"Array"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:cA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:"fill"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:"_"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:bN},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"+"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:bO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:cC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,bt,N]},children:[{type:a,value:bm}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:an}]},{type:a,value:" n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,bt,N]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,"template-string"]},children:[{type:b,tag:c,props:{className:[d,cD,C]},children:[{type:a,value:cE}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"Item "}]},{type:b,tag:c,props:{className:[d,"interpolation"]},children:[{type:b,tag:c,props:{className:[d,cF,e]},children:[{type:a,value:"${"}]},{type:a,value:cC},{type:b,tag:c,props:{className:[d,cF,e]},children:[{type:a,value:n}]}]},{type:b,tag:c,props:{className:[d,cD,C]},children:[{type:a,value:cE}]}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p,bc]},children:[{type:a,value:"export"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p,bc]},children:[{type:a,value:cG}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:cH}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F An array containing the selected items"}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:cI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Select or unselect the given item"}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aW,m]},children:[{type:a,value:ad}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:be}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bn}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,bu,j]},children:[{type:a,value:bv}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:bw}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:bz},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bA}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:a,value:U}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:"className"}]},{type:b,tag:c,props:{className:[d,"attr-value"]},children:[{type:b,tag:c,props:{className:[d,e,"attr-equals"]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cJ}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cJ}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:a,value:aG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:"List Example"}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aX}]},{type:a,value:aG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:aY}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:aL}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:aQ}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aR}]}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aX}]},{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aW,m]},children:[{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:aY}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:bQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:ao}]}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aR}]}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aX}]},{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aW,m]},children:[{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:ao}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:cL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:cM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:cN}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:cO}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:cP}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:a,value:az}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:cQ}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:cR},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bS}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,bt,N]},children:[{type:a,value:cS}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:cT}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p,cU]},children:[{type:a,value:cV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aX}]},{type:a,value:az}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F This is an example of an expensive JS operation that we might"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F execute in the render function to simulate a load."}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F In real-world applications, this operation could be either a custom"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F JS elaboration or just a complex render"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aW,m]},children:[{type:a,value:bR}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Here we use selected just because we want to simulate"}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F an operation that depends on the props"}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aS}]},{type:a,value:" total "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:" selected "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bS}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:bO}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:"for"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aS}]},{type:a,value:bN},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bN},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aj}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:"200000"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cB},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"++"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n    total "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"+="}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,"known-class-name",P]},children:[{type:a,value:"Math"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:"random"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:ay}]},{type:a,value:" total"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah}]}]}]},{type:a,value:g},{type:b,tag:bB,props:{},children:[{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If you want to practice, feel free to pause reading and try to spot the problems yourself first"}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Let’s dive into the analysis."}]},{type:a,value:g},{type:b,tag:aG,props:{id:"missing-key-prop"},children:[{type:b,tag:u,props:{href:"#missing-key-prop",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:"Missing key prop"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"The first thing we can notice from the console is that we are not passing the "},{type:b,tag:k,props:{},children:[{type:a,value:aT}]},{type:a,value:" prop when rendering the list items."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:ar,props:{alt:"Missing key prop warning",src:"\u002Fposts\u002Freact-list\u002Fmissing_key_prop.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"which is caused by this code:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,aw]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:ao}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aR}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you might already know, the "},{type:b,tag:k,props:{},children:[{type:a,value:aT}]},{type:a,value:" prop is critical for dynamic lists to work correctly in React, as it helps the framework identify which items have changed, are added, or are removed."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"A common beginners’ anti-pattern is to solve the problem by passing the item’s index:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,aw]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:" index"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:ao}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"index"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aR}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Despite working for simple use-cases, this approach leads to multiple unexpected behaviors when the list is dynamic, with items being added or removed. For example, if you delete an item in the middle of a list at index N, then all list items located at positions N+1 will now have a different key. That causes React to “confuse” which mapped component belongs to which items. If you want to know more about the potential pitfalls of using the index as key, "},{type:b,tag:u,props:{href:"https:\u002F\u002Frobinpokorny.medium.com\u002Findex-as-a-key-is-an-anti-pattern-e0349aece318",rel:[F,G,H],target:I},children:[{type:a,value:"this article"}]},{type:a,value:" is a great resource."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Therefore, you should specify a key prop with something that uniquely identifies the item being rendered. If the data you’re receiving is coming from a backend, you might be able to use the database’s unique id as key. Otherwise, you could generate a client-side random id with "},{type:b,tag:u,props:{href:"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Fnanoid",rel:[F,G,H],target:I},children:[{type:a,value:"nanoid"}]},{type:a,value:" when creating the items."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Luckily, each of our own items has it’s own id property, so we should handle it as follows:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,aw]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:ao}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:bm}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aR}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Adding the key solves the previous warning, but we still have a significant lag when selecting an item. It’s time to go serious and open the profiler."}]},{type:a,value:g},{type:b,tag:aG,props:{id:"profiling-the-list"},children:[{type:b,tag:u,props:{href:"#profiling-the-list",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:"Profiling the list"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Now that we solved the "},{type:b,tag:k,props:{},children:[{type:a,value:aT}]},{type:a,value:" warning, we are ready to tackle the performance problem. At this stage, using a profiler can help to track down the slow areas and therefore guide our optimization, so that’s what we are going to do."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"When working with React, there are two main profilers you can use: the browser’s built-in profiler, such as the one available inside Chrome’s Dev Tools, and the profiler provided by the React DevTools extension. Both of them are useful in different scenarios. From my experience, the React DevTools’ profiler is a good starting point, as it gives you a component-aware performance representation, which is helpful to track down the specific components that are causing problems, whereas the browser’s profiler works at a lower level and it’s mostly helpful in those cases where the performance problems are not directly related to a component, for example, due to a slow method or Redux reducer."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"For this reason, we are going to start with the React DevTools’ profiler, so make sure to have the extension installed. Then, you can access the Profiler tool from Chrome’s dev tools \u003E Profiler. Before starting, we are going to set up two settings that will help us in the optimization process:"}]},{type:a,value:g},{type:b,tag:aH,props:{},children:[{type:a,value:g},{type:b,tag:az,props:{},children:[{type:a,value:"In Chrome’s Performance tab, set CPU throttling to x6. That will simulate a slower CPU, making slowdowns much more evident."}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:ar,props:{alt:"CPU throttling",src:"\u002Fposts\u002Freact-list\u002Fprofiler_cpu_throttle.png"},children:[]}]},{type:a,value:g},{type:b,tag:aH,props:{},children:[{type:a,value:g},{type:b,tag:az,props:{},children:[{type:a,value:"In React DevTools Profiler tab, click on the Gear icon \u003E Profiler \u003E “Record why each component rendered while profiling”. This will help us track down the causes for useless re-renders."}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:ar,props:{alt:"React profiler settings",src:"\u002Fposts\u002Freact-list\u002Freact_profile_settings.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Once the configuration is done, we are ready to profile our sample todo app. Go ahead and click on the Record button, then select some items in the list and, finally, hit stop recording. This is the result we obtain after selecting 3 items:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:ar,props:{alt:"React profiler results",src:"\u002Fposts\u002Freact-list\u002Freact_app_profiler_result.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"On the top right side, you see highlighted in red the commits, which, in short, are the renders that caused the DOM to update. As you can see, the current commit took 2671 milliseconds to render. By hovering on the various elements, we can tell that most of the time is spent rendering the list items, with an average of 26 milliseconds per item."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Spending 26 milliseconds rendering a single item is not inherently bad. As long as the entire operation takes less than 100ms, the action would still be perceived as snappy by the user. Our biggest problem is that selecting a single item causes all the items to be re-rendered, and that’s what we are going to tackle in the next section."}]},{type:a,value:g},{type:b,tag:bB,props:{},children:[{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"A question we should ask ourselves at this point is: what’s the expected number of items to re-render after an action? In this particular case, the answer is one, as the result of a click is a new item being selected, with none of the others being affected. Another scenario might be a single-selection list, where at most one item could be selected at any given time. In that case, clicking on an item should cause the re-render of two items, as we need to render both the selected one and the one being unselected."}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:aG,props:{id:"preventing-re-renders-with-reactmemo"},children:[{type:b,tag:u,props:{href:"#preventing-re-renders-with-reactmemo",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:"Preventing re-renders with React.memo"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In the previous section, we discussed how selecting a single item causes the entire list to be re-rendered.\nIdeally, we would like to re-render only the items whose \"looks\" are affected by the new selection.\nWe can do that using the "},{type:b,tag:u,props:{href:"https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-api.html#reactmemo",rel:[F,G,H],target:I},children:[{type:a,value:aI}]},{type:a,value:" higher-order component."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In a nutshell, "},{type:b,tag:k,props:{},children:[{type:a,value:aI}]},{type:a,value:" compares the new props with the old ones and, if they are equal, it reuses the previous render.\nOtherwise, if the props are different, it re-renders the component.\nIt's important to note that React executes a "},{type:b,tag:a_,props:{},children:[{type:a,value:cW}]},{type:a,value:" of the props, which must be taken\ninto account when passing objects and methods as props.\nYou can also override the comparison function, though I would advise against it, as it makes\nthe code less maintainable (more on this later)."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Now that we know the basics of "},{type:b,tag:k,props:{},children:[{type:a,value:aI}]},{type:a,value:", let's create another component by wrapping the "},{type:b,tag:k,props:{},children:[{type:a,value:ao}]},{type:a,value:" with it:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,aw]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,p,bc]},children:[{type:a,value:cw}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,cx]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:" memo "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p,bc]},children:[{type:a,value:cy}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:cz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:aM}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"We can now use "},{type:b,tag:k,props:{},children:[{type:a,value:aM}]},{type:a,value:" instead of "},{type:b,tag:k,props:{},children:[{type:a,value:ao}]},{type:a,value:" in the list:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,aw]},children:[{type:b,tag:k,props:{},children:[{type:a,value:aD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:aM}]}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:bm}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aR}]}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Nice! We now have memoized the "},{type:b,tag:k,props:{},children:[{type:a,value:ao}]},{type:a,value:". If you go ahead and try the application, you'll notice something is wrong...\nThe application is still slow!"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If we open up the profiler as we previously did and record a selection, we should be presented with something like the following:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:ar,props:{alt:"React profiler after memoizing",src:"\u002Fposts\u002Freact-list\u002Freact_app_memoized_profiler.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you can see, "},{type:b,tag:a_,props:{},children:[{type:a,value:"we are still re-rendering all the items"}]},{type:a,value:"! Why is it happening?\nIf you hover on one of the list items, you'll see the \"Why did this render?\" section. In our case, it says "},{type:b,tag:k,props:{},children:[{type:a,value:"Props changed: (onClick)"}]},{type:a,value:",\nwhich means our items are re-rendering due to the "},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" callback we are passing to each item."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As we previously discussed, "},{type:b,tag:k,props:{},children:[{type:a,value:aI}]},{type:a,value:" does a "},{type:b,tag:av,props:{},children:[{type:a,value:cW}]},{type:a,value:" of the props by default.\nWhich basically means calling the strick equality operator "},{type:b,tag:k,props:{},children:[{type:a,value:aN}]},{type:a,value:" over each prop. In our case, the check would\nbe roughly equivalent to:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,a$]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"arePropsEqual"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:bU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:ay}]},{type:a,value:" prevProps"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aN}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bo}]},{type:a,value:cX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:T}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aN}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:T}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bo}]},{type:a,value:cX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:X}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aN}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:X}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"While "},{type:b,tag:k,props:{},children:[{type:a,value:V}]},{type:a,value:bf},{type:b,tag:k,props:{},children:[{type:a,value:T}]},{type:a,value:" are compared by "},{type:b,tag:av,props:{},children:[{type:a,value:"value"}]},{type:a,value:" (because they are primitive types, string and boolean respectively), "},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" is compared\nby "},{type:b,tag:av,props:{},children:[{type:a,value:"reference"}]},{type:a,value:" (being a function).\nWhen we created the list items, we passed the "},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" callback as an anonymous closure:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,aw]},children:[{type:b,tag:k,props:{},children:[{type:a,value:X},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Every time the list re-renders, "},{type:b,tag:a_,props:{},children:[{type:a,value:"each item receives a new callback function"}]},{type:a,value:".\nFrom an equality perspective, the callback "},{type:b,tag:av,props:{},children:[{type:a,value:"has changed"}]},{type:a,value:", and therefore the "},{type:b,tag:k,props:{},children:[{type:a,value:aM}]},{type:a,value:" is re-rendered."}]},{type:a,value:g},{type:b,tag:bB,props:{},children:[{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If the equality aspect is still unclear to you, go ahead and open the JS console inside your browser.\nIf you type "},{type:b,tag:k,props:{},children:[{type:a,value:"true === true"}]},{type:a,value:", you'll notice that the result is "},{type:b,tag:k,props:{},children:[{type:a,value:O}]},{type:a,value:".\nBut if you type "},{type:b,tag:k,props:{},children:[{type:a,value:"(() =\u003E {}) === (() =\u003E {})"}]},{type:a,value:", you'll get "},{type:b,tag:k,props:{},children:[{type:a,value:cY}]},{type:a,value:" as result.\nThat's because two functions are equal only if they share the same identity, and\nevery time we create a new closure we generate a new identity."}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Therefore, we need a way to keep the identity of the "},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" callback stable to prevent useless re-renders,\nand that's what we are going to discuss in the next sections."}]},{type:a,value:g},{type:b,tag:ag,props:{id:co},children:[{type:b,tag:u,props:{href:"#a-common-anti-pattern",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:cp}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Before discussing the proposed solution, let's analyze a common (anti-)pattern being used in these cases.\nGiven that the "},{type:b,tag:k,props:{},children:[{type:a,value:aI}]},{type:a,value:" method accepts a custom comparator, you might be tempted to provide one that\nartifically "},{type:b,tag:av,props:{},children:[{type:a,value:"excludes"}]},{type:a,value:f},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" from the check. Something like the following:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,aw]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:aM}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:bU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aN}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bo}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:T}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aN}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:T}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F The onClick prop is not compared"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In this case, even with a changing "},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" callback, the list items won't be re-rendered unless "},{type:b,tag:k,props:{},children:[{type:a,value:V}]},{type:a,value:cZ},{type:b,tag:k,props:{},children:[{type:a,value:T}]},{type:a,value:" are updated.\nIf you go ahead and try this approach, you'll notice the list feels snappy now, but something is wrong:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:ar,props:{alt:"React list custom comparator",src:"\u002Fposts\u002Freact-list\u002Freact_list_example_custom_comparator.gif"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you can see, selecting multiple items doesn't work as expected now, with items being randomly selected and unselected.\nThis is happening because the "},{type:b,tag:a_,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:ad}]},{type:a,value:" function is not pure"}]},{type:a,value:", as it depends on the previous value of the "},{type:b,tag:k,props:{},children:[{type:a,value:T}]},{type:a,value:" items.\nIf you exclude the "},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" callback check from the "},{type:b,tag:k,props:{},children:[{type:a,value:aI}]},{type:a,value:" comparator, then your components might receive an outdated (stale)\nversion of the callback, causing all those glitches."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In this particular case, the way the "},{type:b,tag:k,props:{},children:[{type:a,value:ad}]},{type:a,value:" is implemented is not optimal and we can easily convert it to a pure function\n(in fact, we are going to do that in the next section). But my point here is: "},{type:b,tag:a_,props:{},children:[{type:a,value:"by excluding the "},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" callback from the "},{type:b,tag:k,props:{},children:[{type:a,value:bC}]},{type:a,value:"\ncomparator, you're exposing the application to subtle staleness bugs"}]},{type:a,value:s}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Some might argue that as long as the "},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" callback is kept "},{type:b,tag:av,props:{},children:[{type:a,value:"pure"}]},{type:a,value:", then this approach is perfectly acceptable.\nPersonally, I consider this an anti-pattern for two reasons:"}]},{type:a,value:g},{type:b,tag:aH,props:{},children:[{type:a,value:g},{type:b,tag:az,props:{},children:[{type:a,value:"In complex codebases is relatively easy to transform a pure function into a non-pure one by mistake."}]},{type:a,value:g},{type:b,tag:az,props:{},children:[{type:a,value:"By writing a custom comparator,  you're creating an additional maintenance burden. What if the "},{type:b,tag:k,props:{},children:[{type:a,value:ao}]},{type:a,value:" needs to accept another "},{type:b,tag:k,props:{},children:[{type:a,value:bV}]},{type:a,value:" parameter in the future?"}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Then, you'll need to refactor to the comparator, as shown below. If you forget to add it (which is relatively easy in complex codebases with multiple contributors), then you are again exposing your component to staleness bugs."}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,aw]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:aM}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:bU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aN}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bo}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:T}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aN}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:T}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bo}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:bV}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aN}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:bV}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If a custom comparator is not advisable, what should we do to solve this problem then?"}]},{type:a,value:g},{type:b,tag:aG,props:{id:"making-callback-identities-stable"},children:[{type:b,tag:u,props:{href:"#making-callback-identities-stable",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:"Making callback identities stable"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Our goal is to use the \"base\" version of "},{type:b,tag:k,props:{},children:[{type:a,value:aI}]},{type:a,value:" without a custom comparator.\nChoosing this path will both improve the maintainability of the component and its robustness against future changes.\nFor the memoization to work correctly though, we'll need to "},{type:b,tag:a_,props:{},children:[{type:a,value:"refactor the callback to keep its identity stable"}]},{type:a,value:", otherwise\nthe equality check performed by "},{type:b,tag:k,props:{},children:[{type:a,value:aI}]},{type:a,value:" will prevent the memoization."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"The traditional way to keep function identities stable in React is to use the "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:" hook.\nThe hook accepts a function and a dependency array, and as long as the dependencies won't change, neither will the identity of the callback.\nLet's refactor our example to use "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:an}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Our first attempt is to move the anonymous closure "},{type:b,tag:k,props:{},children:[{type:a,value:"() =\u003E toggleItem(item)"}]},{type:a,value:" inside a separate method inside "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:an}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,aw]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aW,m]},children:[{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:aY}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:bQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:bD},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F How do we get the item?"}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:aM}]}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:bm}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aR}]}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aX}]},{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"We are now facing a problem: previously, the anonymous closure captured the current "},{type:b,tag:k,props:{},children:[{type:a,value:w}]},{type:a,value:" in the "},{type:b,tag:k,props:{},children:[{type:a,value:".map"}]},{type:a,value:" iteration and then passed it to the "},{type:b,tag:k,props:{},children:[{type:a,value:ad}]},{type:a,value:"\nfunction as an argument. But now, we are not declaring the "},{type:b,tag:k,props:{},children:[{type:a,value:ba}]},{type:a,value:" handler inside the iteration, so how can we access the \"selected item\" in the callback?\nLet's discuss a possible solution:"}]},{type:a,value:g},{type:b,tag:ag,props:{id:cq},children:[{type:b,tag:u,props:{href:"#refactoring-the-listitem-component",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:cr}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Currently, the "},{type:b,tag:k,props:{},children:[{type:a,value:ao}]},{type:a,value:bE},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" callback doesn't provide any information about the item being selected.\nIf it did, we would be able to easily solve this problem, so let's refactor the "},{type:b,tag:k,props:{},children:[{type:a,value:ao}]},{type:a,value:bf},{type:b,tag:k,props:{},children:[{type:a,value:aY}]},{type:a,value:" components to provide this information."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Firstly, we change the "},{type:b,tag:k,props:{},children:[{type:a,value:ao}]},{type:a,value:" component to accept the full "},{type:b,tag:k,props:{},children:[{type:a,value:w}]},{type:a,value:" object, and given that the "},{type:b,tag:k,props:{},children:[{type:a,value:V}]},{type:a,value:" prop is now redundant we remove it.\nThen, we introduce an handler for the "},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" event to also provide the "},{type:b,tag:k,props:{},children:[{type:a,value:w}]},{type:a,value:" as argument. This is our end result:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,aw]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aW,m]},children:[{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:ao}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:cL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:cM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:cN}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:cO}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:cP}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:a,value:az}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:cQ}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:cR},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bS}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,bt,N]},children:[{type:a,value:cS}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:cT}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p,cU]},children:[{type:a,value:cV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aX}]},{type:a,value:az}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you can see, the "},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" now provides the current item as a parameter."}]},{type:a,value:g},{type:b,tag:bB,props:{},children:[{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"But wait! You used an anonymous closure again in the "},{type:b,tag:k,props:{},children:[{type:a,value:az}]},{type:a,value:bE},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" handler, shouldn't we avoid them to prevent re-renderings?\nWhile we "},{type:b,tag:av,props:{},children:[{type:a,value:"could"}]},{type:a,value:" create another memoized callback with "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:" inside the "},{type:b,tag:k,props:{},children:[{type:a,value:ao}]},{type:a,value:" component to handle the click event, that would offer no performance improvements in this case.\nThe problem with the anonymous closure we discussed earlier in the "},{type:b,tag:k,props:{},children:[{type:a,value:aY}]},{type:a,value:" item was that it broke the "},{type:b,tag:k,props:{},children:[{type:a,value:aI}]},{type:a,value:" memoization for the "},{type:b,tag:k,props:{},children:[{type:a,value:aM}]},{type:a,value:". Given that we are "},{type:b,tag:av,props:{},children:[{type:a,value:c_}]},{type:a,value:" memoizing the "},{type:b,tag:k,props:{},children:[{type:a,value:az}]},{type:a,value:" element, then there is no performance benefit from having a stable identity for this callback."}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"We can then refactor the "},{type:b,tag:k,props:{},children:[{type:a,value:aY}]},{type:a,value:" component to pass the "},{type:b,tag:k,props:{},children:[{type:a,value:w}]},{type:a,value:" prop instead of "},{type:b,tag:k,props:{},children:[{type:a,value:V}]},{type:a,value:" and to make use of the newly available "},{type:b,tag:k,props:{},children:[{type:a,value:w}]},{type:a,value:" information in the "},{type:b,tag:k,props:{},children:[{type:a,value:ba}]},{type:a,value:" callback:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,aw]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aW,m]},children:[{type:b,tag:c,props:{className:[d,ax]},children:[{type:a,value:aY}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:bQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:bD},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F We now receive the selected item"}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:aM}]}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:a,value:bm}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F We pass the full item instead of the name"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,J,K]},children:[{type:b,tag:c,props:{className:[d,L,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aR}]}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aX}]},{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Nice! Let's go ahead and try the refactored version:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:ar,props:{alt:"React list example, after changes",src:"\u002Fposts\u002Freact-list\u002Freact_list_example_2.gif"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"It works... but it's still slow! If we open up the profiler, we can see the whole list is still being rendered:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:ar,props:{alt:"Profiler results after changes",src:"\u002Fposts\u002Freact-list\u002Freact_list_perf.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you can see from the profiler, the "},{type:b,tag:k,props:{},children:[{type:a,value:X}]},{type:a,value:" identity is still changing! That means our "},{type:b,tag:k,props:{},children:[{type:a,value:ba}]},{type:a,value:" identity is being changed at every re-render."}]},{type:a,value:g},{type:b,tag:ag,props:{id:cs},children:[{type:b,tag:u,props:{href:"#another-common-anti-pattern",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:ct}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Before diving into the proper solution, let's discuss a common anti-pattern used in these cases.\nGiven that the "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:" accepts a dependency array, you could be tempted to specify an empty one to keep the identity fixed:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,a$]},children:[{type:b,tag:k,props:{},children:[{type:a,value:aD},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:bD},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Despite keeping the identity stable, "},{type:b,tag:a_,props:{},children:[{type:a,value:"this approach suffers from the same staleness bugs we discussed in previous sections"}]},{type:a,value:".\nIf we run it, you'll notice the items get unselected as it happened when we specified the custom comparator:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:ar,props:{alt:"React list example with bugs",src:"\u002Fposts\u002Freact-list\u002Freact_list_example_3.gif"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In general, you should always specify the correct dependencies in "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:", "},{type:b,tag:k,props:{},children:[{type:a,value:"useEffect"}]},{type:a,value:bf},{type:b,tag:k,props:{},children:[{type:a,value:c$}]},{type:a,value:", otherwise, you're\nexposing the application to potentially hard-to-debug staleness bugs."}]},{type:a,value:g},{type:b,tag:aG,props:{id:"solving-the-toggleitem-identity-problem"},children:[{type:b,tag:u,props:{href:"#solving-the-toggleitem-identity-problem",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:"Solving the toggleItem identity problem"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As we previously discussed, the problem with our "},{type:b,tag:k,props:{},children:[{type:a,value:ba}]},{type:a,value:" callback is that its "},{type:b,tag:k,props:{},children:[{type:a,value:ad}]},{type:a,value:" dependency identity changes at each render, causing it to re-render as well:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,a$]},children:[{type:b,tag:k,props:{},children:[{type:a,value:aD},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:bD},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Our first attempt is to wrap "},{type:b,tag:k,props:{},children:[{type:a,value:ad}]},{type:a,value:" with "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:" as we did with "},{type:b,tag:k,props:{},children:[{type:a,value:ba}]},{type:a,value:an}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,a$]},children:[{type:b,tag:k,props:{},children:[{type:a,value:aD},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:aZ},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:be}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bn}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,bu,j]},children:[{type:a,value:bv}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:bw}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:bz},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bA}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"This does "},{type:b,tag:av,props:{},children:[{type:a,value:c_}]},{type:a,value:" solve the problem though, as this callback depends on the external state variable "},{type:b,tag:k,props:{},children:[{type:a,value:T}]},{type:a,value:", which changes every time "},{type:b,tag:k,props:{},children:[{type:a,value:aP}]},{type:a,value:" is called. If we want its identity to remain stable, we need a way to make "},{type:b,tag:k,props:{},children:[{type:a,value:ad}]},{type:a,value:" pure. Luckily, we can use "},{type:b,tag:u,props:{href:"https:\u002F\u002Freactjs.org\u002Fdocs\u002Fhooks-reference.html#functional-updates",rel:[F,G,H],target:I},children:[{type:b,tag:k,props:{},children:[{type:a,value:bd}]},{type:a,value:"'s functional updates"}]},{type:a,value:" to accomplish our goal:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,a$]},children:[{type:b,tag:k,props:{},children:[{type:a,value:aD},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:aZ},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:bg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:be}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bn}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,bu,j]},children:[{type:a,value:bv}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:bw}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:ay}]},{type:a,value:da},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:bz},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bA}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you can see, we wrapped our previous logic inside the "},{type:b,tag:k,props:{},children:[{type:a,value:aP}]},{type:a,value:" call, which in turn provides the previous state value we need to compute the new selected items."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If we go ahead and run the refactored example, it works and it's also snappy! We can also run the usual profiler to get a sense of what's happening:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Hovering on the item being rendered:\n"},{type:b,tag:ar,props:{alt:"Fixed react example",src:"\u002Fposts\u002Freact-list\u002Freact_list_memo_good_2.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Hovering on the other items:\n"},{type:b,tag:ar,props:{alt:"Fixed react example 2",src:"\u002Fposts\u002Freact-list\u002Freact_list_memo_good_1.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you can see, after selecting an item we only render the current one being selected now, while the others are being memoized."}]},{type:a,value:g},{type:b,tag:ag,props:{id:cu},children:[{type:b,tag:u,props:{href:"#a-note-on-functional-state-updates",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:cv}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In the example we just discussed, converting our "},{type:b,tag:k,props:{},children:[{type:a,value:ad}]},{type:a,value:" method to the functional mode of "},{type:b,tag:k,props:{},children:[{type:a,value:bd}]},{type:a,value:" was relatively trivial.\nIn real-world scenarios, things might not be as straightforward."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"For example, your function might depend on multiple state pieces:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,a$]},children:[{type:b,tag:k,props:{},children:[{type:a,value:aD},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:cI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:a,value:bF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:" setEnabled"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,"boolean"]},children:[{type:a,value:cY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:aZ},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Only toggle the items if enabled"}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:be}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:bF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:bg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:be}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bn}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,bu,j]},children:[{type:a,value:bv}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:bw}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,p,af]},children:[{type:a,value:ay}]},{type:a,value:da},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,ab,m,x]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:bz},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bA}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:a,value:bF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Every time the "},{type:b,tag:k,props:{},children:[{type:a,value:bF}]},{type:a,value:" value changes, your "},{type:b,tag:k,props:{},children:[{type:a,value:ad}]},{type:a,value:" identity will change as well.\nIn these scenarios, you should either merge both sub-states into the same "},{type:b,tag:k,props:{},children:[{type:a,value:bd}]},{type:a,value:" call, or even better, convert it to a "},{type:b,tag:u,props:{href:"https:\u002F\u002Freactjs.org\u002Fdocs\u002Fhooks-reference.html#additional-hooks",rel:[F,G,H],target:I},children:[{type:b,tag:k,props:{},children:[{type:a,value:db}]}]},{type:a,value:" one.\nGiven that "},{type:b,tag:k,props:{},children:[{type:a,value:db}]},{type:a,value:bE},{type:b,tag:k,props:{},children:[{type:a,value:bG}]},{type:a,value:" function has a stable identity, you can scale this approach to complex states.\nMoreover, the same applies to "},{type:b,tag:u,props:{href:"https:\u002F\u002Fredux.js.org\u002F",rel:[F,G,H],target:I},children:[{type:a,value:"Redux"}]},{type:a,value:bE},{type:b,tag:k,props:{},children:[{type:a,value:bG}]},{type:a,value:" function, so you can move the item toggle logic at the Redux level and convert our "},{type:b,tag:k,props:{},children:[{type:a,value:ad}]},{type:a,value:" function to something as:"}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[$,a$]},children:[{type:b,tag:k,props:{},children:[{type:a,value:aD},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:" dispatch "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"useDispatch"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Given that the dispatch identity is stable, the `toggleItem` will be stable as well"}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:aZ},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,D,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"toggleItemAction"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:a,value:bG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:aG,props:{id:"virtualizing-the-list"},children:[{type:b,tag:u,props:{href:"#virtualizing-the-list",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:"Virtualizing the list?"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Before closing the article, I wanted to briefly cover "},{type:b,tag:av,props:{},children:[{type:a,value:"list virtualization"}]},{type:a,value:", a common technique used to improve performance for long lists.\nIn a nutshell, list virtualization is based on the idea of rendering just a sub-set of the items in a given list (generally the currently visible ones) and deferring the others.\nFor example, if you have a list with a thousand items but only 10 are visible at any given time, then we might only render these 10 first, and the others can be rendered "},{type:b,tag:av,props:{},children:[{type:a,value:"on-demand"}]},{type:a,value:" when needed (i.e. after scrolling)."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"List virtualization offers two main advantages compared to rendering the entire list:"}]},{type:a,value:g},{type:b,tag:aH,props:{},children:[{type:a,value:g},{type:b,tag:az,props:{},children:[{type:a,value:"Faster initial start time, as we only need to render a subset of the list"}]},{type:a,value:g},{type:b,tag:az,props:{},children:[{type:a,value:"Lower memory usage, as only a subset of the items is being rendered at any given time"}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"That said, list virtualization is not a silver bullet you should always use, as it increases complexity and can be glitchy.\nPersonally, I'd avoid virtualized lists if you are only dealing with hundreds of items, as the memoization techniques we discussed in this article are often effective enough  (older mobile devices might require a lower threshold). As always, the right approach depends on the specific use case, so I'd highly recommend profiling your list before diving into more complex optimization techniques."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"We are going to cover virtualization in a future article. In the meanwhile, you can read more about virtualized lists in React, with libraries like "},{type:b,tag:u,props:{href:"https:\u002F\u002Fgithub.com\u002Fbvaughn\u002Freact-window",rel:[F,G,H],target:I},children:[{type:a,value:"react-window"}]},{type:a,value:", and in React Native, with the built-in "},{type:b,tag:u,props:{href:"https:\u002F\u002Freactnative.dev\u002Fdocs\u002Fflatlist",rel:[F,G,H],target:I},children:[{type:a,value:"FlatList"}]},{type:a,value:" component."}]},{type:a,value:g},{type:b,tag:aG,props:{id:bX},children:[{type:b,tag:u,props:{href:dc,ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:bY}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In this article, we covered list optimization in depth. We started from a problematic example and gradually solved most of the performance problems.\nWe also discussed the main anti-patterns you should be aware of, along with potential ways to solve them."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In conclusion, lists are often the cause of performance problems in React, as all items are being re-rendered every time something changes by default.\n"},{type:b,tag:k,props:{},children:[{type:a,value:aI}]},{type:a,value:" is an effective tool to mitigate the issue, but you might need to refactor your application to make your props' identities stable."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"The final code is available in "},{type:b,tag:u,props:{href:"https:\u002F\u002Fcodesandbox.io\u002Fs\u002Fcommonreactlistmistakes-solved-7sn20?file=\u002Fsrc\u002FApp.js",rel:[F,G,H],target:I},children:[{type:a,value:"this CodeSandbox"}]},{type:a,value:" if you're interested."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"PS: there's one small "},{type:b,tag:k,props:{},children:[{type:a,value:c$}]},{type:a,value:" optimization left to add in our example, can you spot it yourself? :)"}]}]},excerpt:{type:bb,children:[{type:b,tag:l,props:{},children:[{type:a,value:bK}]}]},dir:bZ,path:"\u002Farticles\u002F2022-02-04-optimizing-list-in-react-solving-performance-problems-and-anti-patterns",extension:b_,createdAt:bh,updatedAt:bh,cleanedSlug:"optimizing-list-in-react-solving-performance-problems-and-anti-patterns"},{slug:"2022-01-04-12-rust-tips-and-tricks-you-might-not-know-yet",description:"Rust is a great programming language: reliable, fast, enjoyable, but also rather complex. Over the past two years, I’ve been using it both professionally and on side projects (such as Espanso) and, over that time, I stumbled upon many useful patterns and crates that I wish I knew when I first started learning it.",layout:bL,title:"12 Rust Tips and Tricks you might not know yet",author:bM,date:"2022-01-04T00:00:00.000Z",categories:"rust tips tricks tip crates useful",toc:[{id:dd,depth:ae,text:de},{id:df,depth:ae,text:dg},{id:dh,depth:ae,text:di},{id:dj,depth:ae,text:dk},{id:dl,depth:ae,text:dm},{id:dn,depth:ae,text:do0},{id:dp,depth:ae,text:dq},{id:dr,depth:ae,text:ds},{id:dt,depth:ae,text:du},{id:dv,depth:ae,text:dw},{id:dx,depth:ae,text:dy},{id:dz,depth:ae,text:dA}],body:{type:bb,children:[{type:b,tag:l,props:{},children:[{type:a,value:dB},{type:b,tag:u,props:{href:b$,rel:[F,G,H],target:I},children:[{type:a,value:ca}]},{type:a,value:dC}]},{type:a,value:g},{type:a,value:g},{type:b,tag:ag,props:{id:dd},children:[{type:b,tag:u,props:{href:"#using-cowstr-as-return-type",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:de}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Sometimes you need to write methods that accept a string slice (&str) and conditionally return either a modified version of it or the original one. For these cases, you might use "},{type:b,tag:u,props:{href:"https:\u002F\u002Fdoc.rust-lang.org\u002Fstd\u002Fborrow\u002Fenum.Cow.html",rel:[F,G,H],target:I},children:[{type:a,value:"Cow\u003Cstr\u003E"}]},{type:a,value:", so that you only allocate new memory when necessary."}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[aU,$]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bH}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,bi]},children:[{type:a,value:cb},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:a,value:"borrow"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aB,m]},children:[{type:a,value:cc}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ce}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cf}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ce}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:am}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"match"}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:dD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"nth"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:dE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:dF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:be}]},{type:a,value:dG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"is_uppercase"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bj},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F No allocation is necessary, as the string"}]},{type:a,value:bj},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F already starts with an uppercase char"}]},{type:a,value:bj},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:dH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:dE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:dF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bj},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F An allocation is necessary, as the old string"}]},{type:a,value:bj},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F does not start with an uppercase char"}]},{type:a,value:bj},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aS}]},{type:a,value:" new_string"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"String"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:dG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"to_uppercase"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:dI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"chain"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:dD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"skip"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:bO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:dI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"collect"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n            \n            "},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"Owned"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"new_string"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"None"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:dH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aB,m]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cc}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"bob\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"   "},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Allocation"}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cc}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"John\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F No allocation"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:ag,props:{id:df},children:[{type:b,tag:u,props:{href:"#crossbeam-channels-instead-of-the-standard-ones",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:dg}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:dJ},{type:b,tag:u,props:{href:"https:\u002F\u002Fgithub.com\u002Fcrossbeam-rs\u002Fcrossbeam",rel:[F,G,H],target:I},children:[{type:a,value:"crossbeam crate"}]},{type:a,value:" offers a powerful alternative to standard channels with support for the Select operation, timeouts, and more. Similar to what you get out of the box in Golang and traditional Unix sockets."}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[aU,$]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bH}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,bi]},children:[{type:a,value:"crossbeam_channel"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"select"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:" unbounded"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bH}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,bi]},children:[{type:a,value:cb},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:a,value:"time"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:dK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aB,m]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aS}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"s1"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:" r1"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:dL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dM}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aS}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"s2"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:" r2"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:dL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dM}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n    s1"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"send"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:"10"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dN},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:"select!"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:dO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"r1"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cf}]},{type:a,value:dP},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"r1 \u003E {}\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:dQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:dO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"r2"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cf}]},{type:a,value:dP},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"r2 \u003E {}\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:dQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:dK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"from_millis"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:cA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"timed out\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:ag,props:{id:dh},children:[{type:b,tag:u,props:{href:"#golang-like-defer-operator-with-scopeguard",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:di}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If you are coming from Golang, you might miss the \"defer\" operator for certain use-cases (like freeing memory when working with raw pointers or closing a socket)."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In Rust (besides the RAII pattern), you can use the "},{type:b,tag:u,props:{href:"https:\u002F\u002Fdocs.rs\u002Fscopeguard\u002Flatest\u002Fscopeguard\u002F",rel:[F,G,H],target:I},children:[{type:a,value:dR}]},{type:a,value:" crate to easily implement \"cleaup\" logic."}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[aU,$]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,dS,E]},children:[{type:a,value:"#[macro_use(defer)]"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dT}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"crate"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,"module-declaration",bi]},children:[{type:a,value:dR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aB,m]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"start\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F This action will run at the end of the current scope"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:"defer!"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n           "},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"defer\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n\n        "},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"scope end\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"end\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:ch}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F start"}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F scope end"}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F defer"}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F end"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:ag,props:{id:dj},children:[{type:b,tag:u,props:{href:"#cargo-make-for-packaging",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:dk}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:u,props:{href:"https:\u002F\u002Fdoc.rust-lang.org\u002Fcargo\u002Freference\u002Fbuild-scripts.html",rel:[F,G,H],target:I},children:[{type:a,value:"Build scripts"}]},{type:a,value:" are great for a lot of things, but usually not for packaging. My favorite solution for that is "},{type:b,tag:u,props:{href:"https:\u002F\u002Fgithub.com\u002Fsagiegurari\u002Fcargo-make",rel:[F,G,H],target:I},children:[{type:a,value:"Cargo Make"}]},{type:a,value:" by "},{type:b,tag:u,props:{href:"https:\u002F\u002Fsagiegurari.github.io\u002F",rel:[F,G,H],target:I},children:[{type:a,value:"sagiegurari"}]},{type:a,value:", a Rust-based task runner and build tool."}]},{type:a,value:g},{type:b,tag:ag,props:{id:dl},children:[{type:b,tag:u,props:{href:"#customize-and-chain-panic-handlers",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:dm}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:u,props:{href:"https:\u002F\u002Fdoc.rust-lang.org\u002Fstd\u002Fpanic\u002Ffn.set_hook.html",rel:[F,G,H],target:I},children:[{type:a,value:"Panic handlers (called hooks)"}]},{type:a,value:" can be overridden and chained, which becomes particularly useful when setting up custom error reporting and logging for your application."}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[aU,$]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bH}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,bi]},children:[{type:a,value:cb},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:a,value:br},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ci},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:" take_hook"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aB,m]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aS}]},{type:a,value:dU},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:dV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ci}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:dW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bs}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dX}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,cj]},children:[{type:b,tag:c,props:{className:[d,bk,e]},children:[{type:a,value:bl}]},{type:a,value:br},{type:b,tag:c,props:{className:[d,bk,e]},children:[{type:a,value:bl}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"custom logging logic {}\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:dY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dZ},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:d_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:br},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:d$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aS}]},{type:a,value:dU},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:dV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ci}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:dW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bs}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dX}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,cj]},children:[{type:b,tag:c,props:{className:[d,bk,e]},children:[{type:a,value:bl}]},{type:a,value:br},{type:b,tag:c,props:{className:[d,bk,e]},children:[{type:a,value:bl}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"custom error reporting logic {}\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:dY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dZ},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:d_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:br},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:d$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:"panic!"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"test\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:ch}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F custom error reporting logic panicked at 'test', src\u002Fmain.rs:20:5"}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F custom logging logic panicked at 'test', src\u002Fmain.rs:20:5"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:ag,props:{id:dn},children:[{type:b,tag:u,props:{href:"#use-rust-analyzer-on-vscode",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:do0}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:dJ},{type:b,tag:u,props:{href:"https:\u002F\u002Fmarketplace.visualstudio.com\u002Fitems?itemName=matklad.rust-analyzer",rel:[F,G,H],target:I},children:[{type:a,value:"Rust analyzer"}]},{type:a,value:" VSCode extension by "},{type:b,tag:u,props:{href:"https:\u002F\u002Fmatklad.github.io\u002F",rel:[F,G,H],target:I},children:[{type:a,value:"matklad"}]},{type:a,value:" is significantly better than the “official” Rust one. Unfortunately, it’s still showing as a second result on the extensions marketplace, misguiding a lot of beginners."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:ar,props:{alt:"Rust Analyzer extension",src:"\u002Fposts\u002Frustanalyzer.png"},children:[]}]},{type:a,value:g},{type:b,tag:ag,props:{id:dp},children:[{type:b,tag:u,props:{href:"#use-impl-trait-when-working-with-closures",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:dq}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Prefer impl Fn\u002FFnOnce\u002FFnMut to pass a closure to a function (called impl Trait) instead of a generic when possible to keep the signature clean. For non-trivial cases, you might need to box the closure with Box\u003CFn()\u003E, but keep in mind you’ll pay an additional overhead."}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[aU,$]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Instead of this"}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aB,m]},children:[{type:a,value:"setup_teardown_generic"}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:ea}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:eb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:bJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:ea}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ec}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ed}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Use this"}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aB,m]},children:[{type:a,value:ee}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:bJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"impl"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:eb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ec}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ed}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F As a note, this pattern is very useful inside tests"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F to create\u002Fdestroy resources."}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aB,m]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ee}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,cj]},children:[{type:b,tag:c,props:{className:[d,bk,e]},children:[{type:a,value:bl}]},{type:b,tag:c,props:{className:[d,bk,e]},children:[{type:a,value:bl}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"Action!\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:ch}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F setting up..."}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Action!"}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F tearing down..."}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:ag,props:{id:dr},children:[{type:b,tag:u,props:{href:"#enable-clippy-on-save-for-vscode",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:ds}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If you’re using VSCode + Rust Analyzer, I highly suggest going into the settings \u003E Rust Analyzer \u003E Check On Save: Command and setting \"clippy\" as the new default instead of \"check\". Same UX, better warnings."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:ar,props:{alt:"Enable Clippy on Save",src:"\u002Fposts\u002Fclippyonsave.png"},children:[]}]},{type:a,value:g},{type:b,tag:ag,props:{id:dt},children:[{type:b,tag:u,props:{href:"#use-thiserror-and-anyhow-for-idiomatic-error-handling",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:du}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:ck},{type:b,tag:u,props:{href:"https:\u002F\u002Fdocs.rs\u002Fthiserror\u002Flatest\u002Fthiserror\u002F",rel:[F,G,H],target:I},children:[{type:a,value:"thiserror"}]},{type:a,value:bf},{type:b,tag:u,props:{href:"https:\u002F\u002Fcrates.io\u002Fcrates\u002Fanyhow",rel:[F,G,H],target:I},children:[{type:a,value:"anyhow"}]},{type:a,value:" crates for idiomatic error handling. You should use thiserror when the consumer needs to conditionally act based on the error, anyhow otherwise. A good guideline is “use thiserror for libraries and anyhow for applications”."}]},{type:a,value:g},{type:b,tag:ag,props:{id:dv},children:[{type:b,tag:u,props:{href:"#using-dbg-macro-instead-of-println",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:dw}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:ck},{type:b,tag:u,props:{href:"https:\u002F\u002Fdoc.rust-lang.org\u002Fstable\u002Fstd\u002Fmacro.dbg.html",rel:[F,G,H],target:I},children:[{type:a,value:"dbg!() macro"}]},{type:a,value:" instead of println!() when debugging. Less code, more useful information."}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[aU,$]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aB,m]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aS}]},{type:a,value:" var1 "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dN},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Output: 2"}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ef}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"var1"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"        "},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Output: [src\u002Fmain.rs:5] var1 = 2"}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ef}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"var1 "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"*"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"    "},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Output: [src\u002Fmain.rs:6] var1 * 2 = 4"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:ag,props:{id:dx},children:[{type:b,tag:u,props:{href:"#include_str-and-include_bytes-macros",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:dy}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:ck},{type:b,tag:u,props:{href:"https:\u002F\u002Fdoc.rust-lang.org\u002Fstd\u002Fmacro.include_str.html",rel:[F,G,H],target:I},children:[{type:a,value:"include_str!()"}]},{type:a,value:bf},{type:b,tag:u,props:{href:"https:\u002F\u002Fdoc.rust-lang.org\u002Fstd\u002Fmacro.include_bytes.html",rel:[F,G,H],target:I},children:[{type:a,value:"include_bytes!()"}]},{type:a,value:" macros to read the content of a file at "},{type:b,tag:av,props:{},children:[{type:a,value:"compile time"}]},{type:a,value:" and store it inside a const. Useful to avoid messing with multiline string literals."}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[aU,$]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Both of these files are read at *compile time*"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,cm]},children:[{type:a,value:eg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ce}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:"include_str!"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\".\u002Fpath\u002Fto\u002Fthe\u002Ffile.txt\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,cm]},children:[{type:a,value:"BINARY_FILE_CONTENT"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:an}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"u8"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:al}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:"include_bytes!"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\".\u002Fpath\u002Fto\u002Fimage.png\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aB,m]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,cm]},children:[{type:a,value:eg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Output: file content as string"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:ag,props:{id:dz},children:[{type:b,tag:u,props:{href:"#integrating-with-cc-code",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:dA}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If you need to integrate C\u002FC++ code with Rust, the "},{type:b,tag:u,props:{href:"https:\u002F\u002Fcrates.io\u002Fcrates\u002Fcc",rel:[F,G,H],target:I},children:[{type:a,value:"cc crate"}]},{type:a,value:" and the proper build script can get you pretty far. For example, I’ve used them to integrate wxWidgets, a popular C++ gui framework, with my project "},{type:b,tag:u,props:{href:b$,rel:[F,G,H],target:I},children:[{type:a,value:ca}]},{type:a,value:" (see the "},{type:b,tag:u,props:{href:"https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fespanso\u002Fblob\u002Fmaster\u002Fespanso-modulo\u002Fbuild.rs",rel:[F,G,H],target:I},children:[{type:a,value:"build script"}]},{type:a,value:h}]},{type:a,value:g},{type:b,tag:U,props:{className:[Z]},children:[{type:b,tag:_,props:{className:[aU,$]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Inside the build script (build.rs)"}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aB,m]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"cargo:rerun-if-changed=src\u002Fnative.c\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"cargo:rerun-if-changed=src\u002Fnative.h\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,bi]},children:[{type:a,value:"cc"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]}]},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"Build"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bs}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"include"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"src\u002Fnative.h\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"file"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"src\u002Fnative.c\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"compile"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:eh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,Y,N]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"cargo:rustc-link-lib=static=nativemodule\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F Then, in another Rust file (for example, ffi.rs)"}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,dS,E]},children:[{type:a,value:"#[link(name = "},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:eh}]},{type:a,value:", kind = "},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"static\""}]},{type:a,value:")]"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dT}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"\"C\""}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"pub"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aB,m]},children:[{type:a,value:"your_cool_c_module"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Thanks for reading! If you like these topics, make sure to follow me on "},{type:b,tag:u,props:{href:ei,rel:[F,G,H],target:I},children:[{type:a,value:ej}]},{type:a,value:bf},{type:b,tag:u,props:{href:ek,rel:[F,G,H],target:I},children:[{type:a,value:"YouTube"}]},{type:a,value:" to stay updated with the latest articles and videos."}]}]},excerpt:{type:bb,children:[{type:b,tag:l,props:{},children:[{type:a,value:dB},{type:b,tag:u,props:{href:b$,rel:[F,G,H],target:I},children:[{type:a,value:ca}]},{type:a,value:dC}]}]},dir:bZ,path:"\u002Farticles\u002F2022-01-04-12-rust-tips-and-tricks-you-might-not-know-yet",extension:b_,createdAt:bh,updatedAt:bh,cleanedSlug:"12-rust-tips-and-tricks-you-might-not-know-yet"},{slug:"2021-05-04-rust-vs-cpp-which-is-better-and-why",description:cn,layout:bL,title:"Rust vs C++, which is better and why?",author:bM,date:"2021-05-04T00:00:00.000Z",categories:"rust cpp c comparison between difference similarity pro cons advantages",toc:[{id:el,depth:ae,text:em},{id:en,depth:ae,text:eo},{id:ep,depth:ae,text:eq},{id:er,depth:ae,text:es},{id:et,depth:ae,text:eu},{id:bX,depth:ae,text:bY}],body:{type:bb,children:[{type:b,tag:l,props:{},children:[{type:a,value:cn}]},{type:a,value:g},{type:a,value:g},{type:b,tag:ag,props:{id:el},children:[{type:b,tag:u,props:{href:"#similarities",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:em}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Both Rust and C++ are system programming languages, which means they can be used to write low-level code like kernels and firmware for microcontrollers. But compared with C, they offer a lot of abstractions that make it possible to go high-level as well, for example, writing games and web applications."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Another similarity is that neither of them uses a garbage collector to manage memory, which makes the code much more predictable, efficient, and in many cases faster. Of course, if you ever used C, you will know that managing memory yourself is hard. Besides the cognitive overhead, you are also running the risk of causing segmentation faults and undefined behaviors."}]},{type:a,value:g},{type:b,tag:ag,props:{id:en},children:[{type:b,tag:u,props:{href:"#memory-and-thread-safety",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:eo}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"For this reason, modern C++ introduced concepts like smart pointers as a way to mitigate those memory-related bugs, but despite the significant improvements, they are limited in the number of guarantees they can offer. Rust takes it a step further and introduces the borrow checker, a component bundled within the compiler itself that makes sure that a reference does not outlive the data they refer to, preventing entire classes of memory unsafety bugs."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Another big selling point for Rust is its rich type system, which makes it possible to prevent data races at compile time. It does so by introducing two special traits, Sync and Send, which are used by the compiler to determine whether a multi-threaded operation is safe or not. And while sharing some memory between threads is possible in Rust, the compiler will stop you from building a program that does so unsafely, preventing data races even before the program starts. For example, if you want to mutate a variable from multiple threads, the compiler will require you to wrap it with a Mutex or something equivalent, because in general, mutating an unsynchronized variable from multiple threads is unsafe, unless a synchronization primitive or atomic operation is used."}]},{type:a,value:g},{type:b,tag:ag,props:{id:ep},children:[{type:b,tag:u,props:{href:"#unsafe-rust",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:eq}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Up to this point, we discussed the features of the so-called “safe Rust”, which provides guarantees like memory safety and prevents undefined behavior, but there is also another “version” of the language known as unsafe Rust, which basically gives you superpowers at the price of losing all those safety guarantees."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Are you wondering why this is needed? Well, there are mainly two reasons: if you want to interact with the low-level aspects of the operating system or hardware, those operations are inherently unsafe, so the “safe Rust” compiler, which is the one that tries to give you guarantees, is not able to do so. Therefore, if you still want to execute them, you have to explicitly tell the compiler to trust you and give up those safety guarantees, entering the “unsafe” side of Rust."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"The other reason is that when analyzing the code, the compiler is very conservative. From a guarantees point of view, it’s much better to block a valid program than to make an incorrect one pass the compilation step. Thus, there are times in which we might want to bypass those checks, and in order to do so, we need to enter the “unsafe” side as well."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In a way, unsafe Rust and C++ are very similar. The main difference is that Rust programmers usually avoid the “unsafe” side as much as possible unless interfacing with the low-level aspects of the operating systems or when absolutely certain that an operation is correct, and this greatly reduces the surface for memory problems."}]},{type:a,value:g},{type:b,tag:ag,props:{id:er},children:[{type:b,tag:u,props:{href:"#package-management-and-ecosystem",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:es}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"An area in which Rust is arguably better than C++ is package management. If you have ever worked with Python or JavaScript you will feel right at home with cargo, the official Rust package manager. Installing a package is just a matter of adding a line into cargo.toml file, whereas in C++ using an external library can be a huge pain, especially if targeting multiple operating systems. There have been some attempts to bring modern package management to C++, such as Conan and vcpkg, but they are far from being standardized or easy to use as cargo."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"With that being said, the C++ ecosystem is huge, much bigger than the Rust counterpart, as the former has been around for multiple decades. In other words, there are many more libraries for C++ than for Rust, with the latter sometimes lacking a suitable one."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"The good news is that Rust has a very good Foreign Function Interface, which means you can interface with C code very easily from Rust, and thus, also interface with C++ libraries by exposing a C API from them. Unfortunately, this is not always possible, especially in complex cases, but there are some ongoing attempts to make creating bindings easier. An example is the autocxx library, which is being developed by the Google Chrome team to investigate whether parts of the browser could be developed using Rust in the future."}]},{type:a,value:g},{type:b,tag:ag,props:{id:et},children:[{type:b,tag:u,props:{href:"#macros",ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:eu}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Another interesting difference between the two languages is the macro system, which in Rust is much more powerful and safer. First of all, Rust ships with two kinds of macros: declarative and procedural. The former type is similar to the traditional C\u002FC++ macros, with the difference that macros are "},{type:b,tag:av,props:{},children:[{type:a,value:"hygenic"}]},{type:a,value:", meaning that they cannot interfere with variables outside their scope and therefore don’t cause any unwanted side effects. On the other hand, procedural macros are completely different, much more powerful and also complex. They can be basically thought of as compiler plugins that receive the program syntax tree as input, manipulate it, and then return the enriched syntax tree as output. This makes it possible to create annotations, similarly to Java, that enrich the code at compile time."}]},{type:a,value:g},{type:b,tag:ag,props:{id:bX},children:[{type:b,tag:u,props:{href:dc,ariaHidden:O,tabIndex:Q},children:[{type:b,tag:c,props:{className:[R,S]},children:[]}]},{type:a,value:bY}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"To conclude, which of the two languages is better? As always, it depends! But these are the most important takeaways:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Rust is likely to be the future of system programming, and the proof is that many of the big players (Microsoft, Apple, Google) are moving in that direction, gradually integrating Rust with their products. Don’t get me wrong, C++ is far from being dead and is not going away anytime soon due to the incredibly vast amount of legacy code built with it, but an increasing number of companies are choosing Rust over C++ for new products."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"My theory is that in 10-years’ time, most C++ jobs will be focused on maintaining legacy software rather than creating new products. But of course, that’s only my opinion and I might be wrong :)"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If you liked the article, you can follow me on "},{type:b,tag:u,props:{href:ei,rel:[F,G,H],target:I},children:[{type:a,value:ej}]},{type:a,value:cZ},{type:b,tag:u,props:{href:ek,rel:[F,G,H],target:I},children:[{type:a,value:"Youtube"}]},{type:a,value:bn}]}]},excerpt:{type:bb,children:[{type:b,tag:l,props:{},children:[{type:a,value:cn}]}]},dir:bZ,path:"\u002Farticles\u002F2021-05-04-rust-vs-cpp-which-is-better-and-why",extension:b_,createdAt:bh,updatedAt:bh,cleanedSlug:"rust-vs-cpp-which-is-better-and-why"}]}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation"," ","\n",")","(","operator","code","p","function","}","{","keyword",";","\n    ",".","=","a","\n  ","item","property-access","comment",",","=\u003E","tag","string","arrow","attr-name","nofollow","noopener","noreferrer","_blank","script","language-javascript","script-punctuation","parameter","property","true","class-name",-1,"icon","icon-link","selected","div","name","\n      ","onClick","macro","nuxt-content-highlight","pre","line-numbers","\n        ","method","const","toggleItem",2,"control-flow","h2","\n\n","println!","\u003C","[","]","\u003E",":","ListItem","::","useCallback","img","plain-text","number","\n          ","em","language-jsx","maybe-class-name","return","li","fn","function-definition","includes","  "," nextProps","\n    \n    ","h1","ul","React.memo","map"," item","data","MemoizedListItem","===","\n\n  ","setSelected","selectedItems","\u002F\u003E","let","key","language-rust","main","function-variable","\u003C\u002F","List"," toggleItem ","strong","language-js","handleClick","root","module","useState","if"," and ","prevSelected","2022-02-26T19:21:13.793Z","namespace","\n            ","closure-punctuation","|","id","!","&&","\n    prevProps","Cow","panic","new","literal-property","spread","...","else","filter","current"," current ","!==","blockquote","memo"," handleClick ","'s ","isEnabled","dispatch","use","\"{}\"","action","React is the most popular front-end framework, and that’s for a reason. Besides being funded by one of the largest companies on the planet, it’s also built around a few key concepts (one-way data flow, immutable data, functional components, hooks) that make it easier than ever to create robust applications. That said, it’s not without pitfalls.","post","Federico Terzi"," i ","1"," data"," selectedItems","expensiveOperation","?","0","prevProps","color","??","conclusion","Conclusion","\u002Farticles",".md","https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fespanso","Espanso","std","capitalize","&","str","-\u003E","unwrap","\u002F\u002F Output:","set_hook","closure-params","Use the ","2","constant","This question comes up a lot lately, especially when considering if learning Rust is worth it or not, and so I thought it could be a wonderful opportunity to write a new article, discussing the differences between the two, as well as what they share in common.","a-common-anti-pattern","A common anti-pattern","refactoring-the-listitem-component","Refactoring the ListItem component","another-common-anti-pattern","Another common anti-pattern","a-note-on-functional-state-updates","A note on functional state updates","import","imports","from","\"react\"","100"," i","n","template-punctuation","`","interpolation-punctuation","default","App"," setSelected","\""," name"," selected"," onClick ","\u002F\u002F Run an expensive operation to simulate a load","\u002F\u002F In real-world JS applications, this could be either a custom","\u002F\u002F JS elaboration or a complex render.","style","selected ","textDecoration","\"line-through\"","nil","undefined","shallow comparison","\n         prevProps","false"," or ","not","useMemo"," prevSelected","useReducer","#conclusion","using-cowstr-as-return-type","Using Cow\u003Cstr\u003E as return type","crossbeam-channels-instead-of-the-standard-ones","Crossbeam channels instead of the standard ones","golang-like-defer-operator-with-scopeguard","Golang-like defer operator with Scopeguard","cargo-make-for-packaging","Cargo-make for packaging","customize-and-chain-panic-handlers","Customize and chain Panic handlers","use-rust-analyzer-on-vscode","Use Rust Analyzer on VSCode","use-impl-trait-when-working-with-closures","Use impl Trait when working with Closures","enable-clippy-on-save-for-vscode","Enable Clippy on Save for VSCode","use-thiserror-and-anyhow-for-idiomatic-error-handling","Use “thiserror” and “anyhow” for idiomatic error handling","using-dbg-macro-instead-of-println","Using dbg!() macro instead of println!()","include_str-and-include_bytes-macros","include_str!() and include_bytes!() macros","integrating-with-cc-code","Integrating with C\u002FC++ code","Rust is a great programming language: reliable, fast, enjoyable, but also rather complex. Over the past two years, I’ve been using it both professionally and on side projects (such as ",") and, over that time, I stumbled upon many useful patterns and crates that I wish I knew when I first started learning it.","chars","Some","first_char"," first_char","Borrowed","\n              ","The ","Duration","unbounded","i32","\n\n    ","recv"," msg "," msg","scopeguard","attribute","extern"," prev_hook ","take_hook","Box","move"," panic","\n        \n        ","prev_hook","    \n    ","A","FnOnce","\"setting up...\"","\"tearing down...\"","setup_teardown","dbg!","FILE_CONTENT","\"nativemodule\"","https:\u002F\u002Ftwitter.com\u002Fterzi_federico","Twitter","https:\u002F\u002Fwww.youtube.com\u002Fc\u002FFedericoTerzi","similarities","Similarities","memory-and-thread-safety","Memory and Thread safety","unsafe-rust","Unsafe Rust","package-management-and-ecosystem","Package management and ecosystem","macros","Macros")));